#  【TW】培训初体验之二三所得

### 花落知多少 

> - **ThoughtWorks Culture**
> -  **Agile Development**
> -  **Feedback**
> -  **Retro**

### 1. ThoughtWorks Culture

在20世纪80年代，Roy Singham 在芝加哥成立了 Singham Business Services，1993年正式以新名称ThoughtWorks注册成立，公司发展以三大支柱为核心:***经营可持续的业务***、***推动 IT变革，追求软件卓越***、***积极提倡社会和经济公正*** ，多年来致力于敏捷开发，并不断扩展技术栈，关注女性职业发展，业务包括*咨询服务*、*构建定制化系统和定制化产品* 并积极推动社区发展，关注国际新兴技术，关注个人成长的可能性，我们以*通过软件创造人类更美好的明天，倡导社会责任感，创造公平公正的·经济环境* 为使命。

<img src=".\3 pillars.png" style="zoom:50%">

通过现场的培训，我能感觉到在ThoughtWorks工作，可以带给我**有自我约束的自由**、**一个团结互助的团体、正确且相似的价值观、扁平化的管理、用于学习的开放的信息、一个能坦然提出、接受 Feedback的和谐环境...** Just do the right thing.

### 2. Agile Development

在20世纪60年代，软件行业陷入危机，1970年Winston W. Royce在论文中提到一种他不赞成的方法，却被许多没来得及看完论文全文的人拿来作为拯救危机的救星——瀑布模型(waterfall)。

<img src=".\Waterfall.JPEG" style="zoom:70%">

它的工作原理是这样的：**有人会提出一个他们想要开发的软件。在写完一行代码之前，需求者/产品经理们会写出他们想要构建的内容，以及一系列冗长而详细的计划。他们制作所谓的“需求文档”，在上面列出他们想要软件做的所有事情。然后项目会流向下游，从一个阶段到下一个阶段，从一个团队到另一个团队，直到完成。最后，整个新软件都经过了测试，反馈给了客户，然后交付出去。**

这样的开发方法看似合理，但却要求从软件开发初期就明确需求，然而实际情况是，软件需求很难在软件开发周期的前期确定，随着新技术新需求的产生，前期制定的软件需求往往无法满足当前社会的需求，软件开发出来存在功能落后的风险，再加上客户与开发人员缺少交流，双方对文档理解程度不同，最终成品与预期产品相去甚远。

后期通过开发人员的努力，在瀑布模型的基础上其他的软件开发方法也被不断提出，包括*原型模型、螺旋模型、重量级方法、轻量级方法* 等，但效果都不尽人意，直到敏捷宣言的提出。

#### 敏捷宣言

![](.\敏捷宣言.jpg)

上图内容为2001年雪鸟会议上由Martin Fowler, Jim Highsmith等人撰写的敏捷宣言，由图中可以看出在敏捷方法的价值观中：**个体和互动** 高于*流程和工具*，**工作的软件** 高于_详尽的文档_ ，__客户合作__ 高于_合同谈判_ ，**响应变化** 高于*遵循计划*。

目前比较常用的敏捷方法有：***SCRUM*** 和 ***极限编程（XP）*** ，下面我们对两种敏捷开发方法做一个简单的介绍。

#### SCRUM

Scrum是迭代式增量软件开发过程，通常用于敏捷软件开发。Scrum包括了一系列实践和预定义角色的过程骨架。Scrum中的主要角色包括同项目经理类似的Scrum主管角色负责维护过程和任务，产品负责人代表利益所有者，开发团队包括了所有开发人员。虽然Scrum是为管理软件开发项目而开发的，它同样可以用于运行软件维护团队，或者作为计划管理方法：Scrum of Scrums. 开发流程如下图所示：

![](.\Scrum.jpg)

简单介绍一下图中各术语的的意义：

> - **Product Owner(产品负责人) **: Scrum中负责最大化产品价值的角色，主要是通过向开发团队渐进地管理和表达对产品的业务和功能期望。 
>
> - **Product Backlog(产品积压列表)** : 为创建、维护和维持产品而要完成的工作的有序列表，依照用户价值进行优先级排序。为Sprint选择的产品待办事项项目集，以及提供产品增量和实现Sprint目标的计划。Sprint Backlog是开发团队预测下一次增量中将具有哪些功能以及将该功能提供到“完成”增量所需的工作。Product Backlog是产品中已知所需的所有内容的有序列表。它是对产品进行任何更改的唯一要求来源。由ProductOwner管理。
>
> <img src =".\SprintBacklog.png" style="width:40%">
>
> - **Sprint Planning Meeting(冲刺计划会议)**：以8小时或更短时间准备开始Sprint。 它有助于Scrum团队从Product Backlog中检查下一步最有价值的工作，并将其设计为Sprint Backlog。Sprint Planning回答以下问题：
>
>   - 即将到来的Sprint可以在增量中提供什么？
>
>   - 如何实现提升增量所需的工作？
>
>     <img src="./Sprint Planning_0.png">
>
> - **Sprint Backlog(冲刺订单)**: 对实现Sprint目标的开发工作的概述，通常是对功能和交付该功能所需工作的预测。由Development Team 管理。
>
>   <img src=".\SprintBacklog_0.png" style="zoom:90%">
>
> - **Team(开发团队)**：Scrum团队中的角色，负责管理、组织和执行所有开发工作，以在每个sprint中创建可发布的产品增量。
>
> - **Scrum Master**: Scrum团队中负责指导、指导、教学和帮助Scrum团队及其环境正确理解和使用Scrum的角色。
>
> - **Sprint(冲刺)**: 一个时间周期（通常在2周到1个月之间），开发团队会在此期间内完成所承诺的一组订单项的开发。 冲刺是一个连续过程，没有中间间隙。
>
> - **Daily Scrum**: Daily Scrum是一个15分钟的时间盒事件，供开发团队同步活动并为接下来的24小时制定计划。Daily Scrum在一个Sprint中每天都会举行。在此，开发团队计划在接下来的24小时内开展工作。通过检查自上次Daily Scrum以来的工作并预测即将到来的Sprint工作，这可以优化团队协作和性能。Daily Scrum每天通常在同一时间和地点举行，以降低复杂性。
>
> - **Burn Down Chart(燃尽图)** :燃尽图是一个公开展示的图表，显示当前Sprint中未完成的任务数目，或在冲刺订单上未完成的订单项的数目。燃尽图可以使'冲刺(sprint)平稳的覆盖大部分的迭代周期，且使项目仍然在计划周期内。
>
> - **Sprint Review(冲刺评审)**：在Sprint结束时举行Sprint Review，检查增量并根据需要调整Product Backlog. 在Sprint期间可能会进行单个Sprint Review部署或许多部署，从而导致需要检查增量。
>
>   <img src=".\SprintReview.png" style="zoom:40%">
>
> - **Sprint Retrospective(冲刺回顾)**：Sprint Retrospective是Scrum团队检查自身并为下一个sprint制定改进计划的机会。Sprint Rertospective发生在Sprint Review之后和下一个sprint计划之前。这是最多一个月Sprint进行3小时的回顾会议。对于较短的Sprint，会议通常较短。Scrum Master确保事件发生，并且开发团队的其他人员了解其目的。这是Scrum团队改进的机会，所有成员都应该出席。
>
> <img src=".\SprintRetro.png" style="zoom:30%">
>
> - **Increment(增量)**：增量是在冲刺期间完成的所有Product Backlog与之前所有Sprint的增量值之和。在冲刺结束时，新的增量必须“Done”，这意味着它必须处于可使用的状态，并且满足Scrum团队对“Done”的定义。增量是一个可检查的、已完成的工作体，支持冲刺结束时的经验主义。增量是朝着愿景或目标迈进的一步。无论产品所有者是否决定发布增量，增量都必须处于可用状态。
>
> **Definition of "Done"**
>
> ![](.\ScrumProject.png)
>
> *部分内容参考材料*：[What is Scrum?](https://www.scrum.org/resources/what-is-scrum)

#### 极限编程（XP）

极限编程（Extreme Programming，简称XP）是由KentBeck在1996年提出的，是一种软件工程方法学，是敏捷软件开发中可能是最富有成效的几种方法学之一。如同其他敏捷方法学，极限编程和传统方法学的本质不同在于它更强调可适应性而不是可预测性。

KentBeck 在九十年代初期与 WardCunningham 共事时，就一直共同探索着新的软件开发方法，希望能使软件开发更加简单而有效。Kent仔细地观察和分析了各种简化软件开发的前提条件、可能性以及面临的困难。1996年三月，Kent终于在为DaimlerChrysler所做的一个项目中引入了新的软件开发观念——XP。适用于小团队开发。

开发流程如下图所示：

<img src="./Extreme Programming.jpg">

**XP中一些基本概念的简介:**

> **UserStory**：开发人员要求客户把所有的需求写成一个个独立的小故事，每个只需要几天时间就可以完成。开发过程中，客户可以随时提出新的UserStory，或者更改以前的UserStory。
>
> **System Metaphor(系统隐喻)**：为了帮助每个人一致清楚地理解要完成的客户需求、要开发的系统功能，XP开发小组用很多形象的比喻来描述系统或功能模块是怎样工作的。它是系统的未来影像，是它使得所有单独模块的位置和外观变得明显直观。如果模块的外观与整个隐喻不符，那么你就知道该模块是错误的。比如，对于一个搜索引擎，它的Metaphor可能就是“一大群蜘蛛，在网上四处寻找要捕捉的东西，然后把东西带回巢穴。”
>
> **Story Estimates和开发速度**：开发小组对每个UserStory进行估算，并根据每个开发周期（Iteration）中的实际情况反复计算开发速度。这样，开发人员和客户能知道每个星期到底能开发多少UserStory。
>
> **ReleasePlan和ReleaseScope**：整个开发过程中，开发人员将不断地发布新版本。开发人员和客户一起确定每个发布所包含的UserStory。
>
> **Iteration（开发周期，或称迭代）和 IterationPlan**：在一个Release过程中，开发人员要求客户选择最有价值的UserStory作为未来*一两个星期* 的开发内容。
>
> **TheSeed**：第一个迭代（Iteration）完成后，提交给客户的系统。虽然这不是最终的产品，但它已经实现了几个客户认为是最重要的Story，开发人员将逐步在其基础上增加新的模块。
>
> **Continuous Integration（整合）**：把开发完的UserStory的模块一个个拼装起来，一步步接近乃至最终完成最终产品。
>
> **Acceptance Test（验收测试）**：对于每个UserStory，客户将定义一些测试案例，开发人员将使运行这些测试案例的过程自动化。
>
> **UnitTest（单元测试）**：在开始写程序前，程序员针对大部分类的方法，先写出相应的测试程序。
>
> **Refactoring(重构)**：去掉代码中的冗余部分，增加代码的可重用性和伸缩性。
>
> **Small Releases(小型发布)**：开发团队需要经常向客户发布系统的迭代版本。一些团队每天都将新软件部署到生产中。至少每一两周你会想把新软件投入生产。在每次迭代结束时，您都将测试、工作、生产就绪的软件，以向客户演示。把它投入生产是他们的决定。
> Release Planning Meeting 用于计划具有良好业务意义的小功能单元，并可在项目早期发布到客户环境中。这对于及时获得有价值的反馈以对系统的开发产生影响至关重要。

与传统的开发过程不同，极限编程的核心活动体现在需求→测试→编码→设计过程中，因此对工作环境、需求分析、设计、编程、测试、发布等提出了新的思路和要求。

**1.工作环境**

XP要求每个参加项目开发的人都担任一个角色（项目经理、项目监督人等），并履行相应的权利和义务。所有的人都在一个开放式的开发环境中工作，最好是在同一个大房间中工作，随时讨论问题，强调每周工作40小时工作制，不加班。

**2.需求分析**

客户被纳入开发队伍。由于客户不具备计算机专业知识，无法用专业语言明确描述需求，所以开发人员和客户一起，用讲故事的方式把需求表达出来，这种故事被称为 **user story**，即用user story表示需求。开发人员根据经验将许多user story组合起来，或将其进行分解，最终记录在story card的小卡片上，这些user story将陆续被程序员在各个小的周期内，按照商业价值、开发风险的优先顺序逐个开发。

**3.设计**

XP强调简单设计（simple design），即用最简单的办法实现每个小需求。在XP中，没有那种传统开发模式中一次性的、针对所有需求的总体设计，这些设计只要能够满足系统客户在当前的需求就可以了，不需要考虑将来可能的变化，整个设计过程包括在整个螺旋式的项目中。

**4.编程**

结对编程（pair programming）是极限编程的一大特色，即两个人一起使用同一屏幕，同一个键盘，共同完成一段程序的编码。成对编程的好处是，可以提高纪律性，更容易写出优质的代码，同时保证编程的流畅进行，更重要的是，能够使得整个团队更方便地分享编程经验，有利于新手的快速成长。

**5.测试**

在极限编程中，测试是非常重要的一个环节，它首先要求在开始写程序之前先写好测试，其目的是为了提高软件的可测试性。XP要求开发人员经常把开发好的模块整合到一起，每次整合后都要运行单元测试；做任何的代码复核和修改，都要运行单元测试；发现了漏洞，就要增加相应的测试。除了单元测试之外，还要进行整合测试、功能测试、负荷测试和系统测试等。所有这些测试是极限编程开发过程中最重要的文档之一，也是最终交付给用户的内容之一。

**6.发布**

XP要求按照开发计划，每经过一个开发周期，软件就发布一次，而不是像传统的开发方法那样，整个软件开发完成后才发布。在一个开发周期内，开发人员要求客户选择最有价值的user story作为未来一两个星期的开发内容，一个开发周期完成后，提交给客户的系统虽然不是最终的产品，但它已经实现了几个客户认为最重要的story，开发人员将逐步在其基础上增加新的模块，而且在发布前软件都经过单元测试和集成测试，因此，虽然软件并不完备，但是发布的软件客户还是可以真正使用的。



**极限编程中有五个核心价值是我们在开发中必须注意的：**

> 沟通（Communication）、简单（Simplicity）、反馈（Feedback）、勇气（Courage）、尊重（Respect）

**1.沟通**

构建一个软件系统的基本任务之一就是与系统的开发者交流以明确系统的具体需求。在一些正式的软件开发方法中，这一任务是通过文档来完成的。极限编程技术可以被看成是开发小组的成员之间迅速构建与传播制度上的认识的一种方法。它的目标是向所有开发人员提供一个对于系统的共享的视角，而这一视角又是与系统的最终用户的视角相吻合的。为了达到这一目标，极限编程支持设计、抽象、还有用户-程序员间交流的简单化，鼓励经常性的口头交流与回馈。

**2.简单**

极限编程鼓励从最简单的解决方式入手再通过不断重构达到更好的结果。这种方法与传统系统开发方式的不同之处在于，*它只关注于对当前的需求来进行设计、编码，而不去理会明天、下周或者下个月会出现的需求*。极限编程的拥护者承认这样的考虑是有缺陷的，即有时候在修改现有的系统以满足未来的需求时不得不付出更多的努力。然而他们主张“*不对将来可能的需求上投入精力*”所得到的好处可以弥补这一点，因为将来的需求在他们还没提出之前是很可能发生变化的。为了将来不确定的需求进行设计以及编码意味着在一些可能并不需要的方面浪费资源。而与之前提到的“交流”这一价值相关联来看，设计与代码上的简化可以提高交流的质量。一个由简单的编码实现的简单的设计可以更加容易得被小组中的每个程序员所理解。

**3.反馈**

 在极限编程中，“反馈”是和系统开发的很多不同方面相关联的：

（1）来自系统的反馈：通过编写单元测试，程序员能够很直观的得到经过修改后系统的状态。

（2）来自客户的反馈：功能性测试是由客户还有测试人员来编写的。他们能由此得知当前系统的状态。这样的评审一般计划2、3个礼拜进行一次，这样客户可以非常容易的了解、掌控开发的进度。

（3）来自小组的反馈：当客户带着新需求来参加项目计划会议时，小组可以直接对于实现新需求所需要的时间进行评估然后反馈给客户。

反馈是与“交流”、“简单”这两条价值紧密联系的。为了沟通系统中的缺陷，可以通过编写单元测试，简单的证明某一段代码存在问题。来自系统的直接反馈信息将提醒程序员注意这一部分。用户可以以定义好的功能需求为依据，对系统进行周期性的测试。

**4.勇气**

极限编程理论中的“系统开发中的勇气”最好用一组实践来诠释。其中之一就是“*只为今天的需求设计以及编码，不要考虑明天*”这条戒律。这是努力避免陷入设计的泥潭、而在其他问题上花费了太多不必要的精力。勇气使得开发人员在需要重构他们的代码时能感到舒适。这意味着重新审查现有系统并完善它会使得以后出现的变化需求更容易被实现。另一个勇气的例子是_了解什么时候应该完全丢弃现有的代码_。每个程序员都有这样的经历：他们花了一整天的时间纠缠于自己设计和代码中的一个复杂的难题却无所得，而第二天回来以一个全新而清醒的角度来考虑，在半小时内就轻松解决了问题。

**5.尊重**

尊重的价值体现在很多方面。在极限编程中，团队成员间的互相尊重体现在每个人保证提交的任何改变不会导致编译无法通过、或者导致现有的测试案例失败、或者以其他方式导致工作延期。团队成员对于他们工作的尊重体现在他们总是坚持追求高质量，坚持通过重构的手段来为手头的工作找到最好的解决设计方案。

*部分内容参考材料*：[Extreme Programming: A gentle introduction](http://www.extremeprogramming.org/)

#### SCRUM 和 极限编程（XP）的区别

|                                          |                              XP                              |                            SCRUM                             |
| :--------------------------------------: | :----------------------------------------------------------: | :----------------------------------------------------------: |
|                 迭代周期                 |                            1~2周                             |                            2~4周                             |
|               是否允许修改               | 在一个需要没有实现的时候可以使用其他的需求将其替换，但是实现的时间是要相等的 | Scrum是不允许这样做的，一旦迭代开工会完毕，不允许有改变，并有Scrum Master严格把关 |
|        需求是否严格按照优先级实现        |                     务必要遵守优先级别的                     |                            不需要                            |
| 是否采用严格的工程方法，保证进度或者质量 | 非常严格，规定需要采用TDD、自动测试、结对编程、简单设计、重构等约束团队的行为。 |  没有对软件的整个实施过程开出工程实践的处方，要求开发者自觉  |

### 3. Feedback and Retro

先说明一下为什么要进行Feedback以及Retro. 基于TW的公司文化 3 PILLARS: ***经营可持续的业务***、***推动 IT变革，追求软件卓越***、***积极提倡社会和经济公正***，以及敏捷开发的特点，合理的**Feedback**可以**帮助他人，提升自己，追求卓越**；SCRUM中有Sprint Retrospective这一环节，**Retro**可以使团队通过对本迭代的工作过程进行回顾，分析团队的改进空间，回顾会是保持团队持续改善的重要工具。两者可以显著提升个人以及团队的能力，在扁平化管理的公司中尤为重要。

#### Feedback

**如何给别人反馈**

反馈套路——SBI

> - 在什么情况下（Situation)
> - 观察到什么行为（Behavior）
> - 造成的影响（Impact）
> - 反思（Reflection）(可选)

**提出反馈时需要注意的几点**

> - 基于行为
>
>   通用句式：我看到了……想找你确认一下
>
> - 对话
>
>   通⽤用句句式：有空吗？想找你聊⼀一下，找个安静的地⽅方可以吗？
>
> - 不要激进
>
>   通⽤用句句式：我观察到。。。我猜测是。。。想跟你确认下是这样吗？
>
> - 安全私人的环境
>
>   通⽤用句句式：我们找个会议室吧
>
> - 越早越好
>
>   时间会导致对方遗忘你想反馈的事件
>
> - 不要太多
>
>   集中在一两点反馈
>
> - 可执行的Action
>
>   尝试得到一个有效的可执行的Action
>
> - 支持对方





<img src=".\feedback.jpg">

**如何接受反馈**

> - 不要抗拒
>
>   保持开放的态度，理性看待反馈，不采取防御态度
>
> - 有效倾听
>
>   对反馈做出思考，寻求原因以及解决方案
>
> - 表达感谢
>
>   感谢对方帮助自己提高和成长
>
> - 采取行动
>
>   积极付出行动去提升自己

#### **Retrospective**

<img src=".\Retro.jpg">

**迭代回顾会原则**

> - Scrum Master要引导团队整体产生改进建议和制定措施，不是自己
>   发生问题，自己制定措施
> - 回顾会议对事不对人，不要演变成批⽃会
> - 回顾会议要营造一个开放、自由、正向的气氛，不要演变成吐槽会
> - 好的、不好的地方，都应该以实例来说明，而非感觉
> - Action应该在下一个迭代中就能看到成效，且必须要有Owner
> - Action由SM纳⼊到团队的待办事项列表中

**回顾板通常为下图样式**

<img src=".\retroboard.jpg">



本次培训收获颇丰，对未来入职后需要用到的知识做了指导性介绍，对将来的职场生活以及工作方式有了一个简单的了解，不至于十分迷茫。感谢~











